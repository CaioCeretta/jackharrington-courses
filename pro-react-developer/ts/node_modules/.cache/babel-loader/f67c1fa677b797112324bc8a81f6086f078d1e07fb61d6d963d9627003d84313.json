{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useState, useEffect, useRef, useLayoutEffect } from \"react\";\nconst useCallbackRef = callback => {\n  _s();\n  const callbackRef = useRef(callback);\n  useLayoutEffect(() => {\n    callbackRef.current = callback;\n  }, [callback]);\n  return callbackRef;\n};\n_s(useCallbackRef, \"JN15rp4XhCkJ2PzDO1P642wNcj0=\");\nexport const useFetch = options => {\n  _s2();\n  const [data, setData] = useState(null);\n  const savedOnSuccess = useCallbackRef(options.onSuccess);\n  useEffect(() => {\n    console.log(\"Use Fetch Console\");\n    if (options.url) {\n      let isCancelled = false;\n      console.log(options);\n      fetch(options.url).then(response => {\n        return response.json();\n      }).then(json => {\n        var _savedOnSuccess$curre;\n        (_savedOnSuccess$curre = savedOnSuccess.current) === null || _savedOnSuccess$curre === void 0 ? void 0 : _savedOnSuccess$curre.call(savedOnSuccess, json);\n        return setData(json);\n      });\n    }\n  }, [options.url]);\n  return {\n    data\n  };\n};\n_s2(useFetch, \"cH+C8yTn+pX9P7G1tdfDj7pVLlI=\", false, function () {\n  return [useCallbackRef];\n});","map":{"version":3,"names":["useState","useEffect","useRef","useLayoutEffect","useCallbackRef","callback","_s","callbackRef","current","useFetch","options","_s2","data","setData","savedOnSuccess","onSuccess","console","log","url","isCancelled","fetch","then","response","json","_savedOnSuccess$curre","call"],"sources":["/home/jorge/Estudos/Youtube/jack-harrington-courses/pro-react-developer/src/utils/useFetch.ts"],"sourcesContent":["import React, { useState, useEffect, useRef, useLayoutEffect } from \"react\";\n\nconst useCallbackRef = (callback: any) => {\n  \n  const callbackRef = useRef(callback)\n\n  useLayoutEffect(() => {\n    callbackRef.current = callback\n  }, [callback])\n\n  return callbackRef;\n\n}\n\nexport const useFetch = (options: any) => {\n  const [data, setData] = useState(null);\n\n  const savedOnSuccess = useCallbackRef(options.onSuccess)\n\n  useEffect(() => {\n    console.log(\"Use Fetch Console\")\n    if (options.url) {\n      let isCancelled = false;\n      console.log(options)\n      fetch(options.url)\n        .then((response) => {\n          return response.json()\n        })\n        .then((json) => {\n          savedOnSuccess.current?.(json)\n          return setData(json)});\n        \n    }\n  }, [options.url]);\n\n  return {\n    data,\n  };\n};\n"],"mappings":";;AAAA,SAAgBA,QAAQ,EAAEC,SAAS,EAAEC,MAAM,EAAEC,eAAe,QAAQ,OAAO;AAE3E,MAAMC,cAAc,GAAIC,QAAa,IAAK;EAAAC,EAAA;EAExC,MAAMC,WAAW,GAAGL,MAAM,CAACG,QAAQ,CAAC;EAEpCF,eAAe,CAAC,MAAM;IACpBI,WAAW,CAACC,OAAO,GAAGH,QAAQ;EAChC,CAAC,EAAE,CAACA,QAAQ,CAAC,CAAC;EAEd,OAAOE,WAAW;AAEpB,CAAC;AAAAD,EAAA,CAVKF,cAAc;AAYpB,OAAO,MAAMK,QAAQ,GAAIC,OAAY,IAAK;EAAAC,GAAA;EACxC,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EAEtC,MAAMc,cAAc,GAAGV,cAAc,CAACM,OAAO,CAACK,SAAS,CAAC;EAExDd,SAAS,CAAC,MAAM;IACde,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;IAChC,IAAIP,OAAO,CAACQ,GAAG,EAAE;MACf,IAAIC,WAAW,GAAG,KAAK;MACvBH,OAAO,CAACC,GAAG,CAACP,OAAO,CAAC;MACpBU,KAAK,CAACV,OAAO,CAACQ,GAAG,CAAC,CACfG,IAAI,CAAEC,QAAQ,IAAK;QAClB,OAAOA,QAAQ,CAACC,IAAI,CAAC,CAAC;MACxB,CAAC,CAAC,CACDF,IAAI,CAAEE,IAAI,IAAK;QAAA,IAAAC,qBAAA;QACd,CAAAA,qBAAA,GAAAV,cAAc,CAACN,OAAO,cAAAgB,qBAAA,uBAAtBA,qBAAA,CAAAC,IAAA,CAAAX,cAAc,EAAWS,IAAI,CAAC;QAC9B,OAAOV,OAAO,CAACU,IAAI,CAAC;MAAA,CAAC,CAAC;IAE5B;EACF,CAAC,EAAE,CAACb,OAAO,CAACQ,GAAG,CAAC,CAAC;EAEjB,OAAO;IACLN;EACF,CAAC;AACH,CAAC;AAACD,GAAA,CAxBWF,QAAQ;EAAA,QAGIL,cAAc;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}